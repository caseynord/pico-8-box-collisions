pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
--main

function _update()
	local nextx=ball.x
	local nexty=ball.y
	
	--handle input/movement
	if btn(0) then nextx=ball.x-1 end
 if btn(1) then nextx=ball.x+1 end
 if btn(2) then nexty=ball.y-1 end
 if btn(3) then nexty=ball.y+1 end

	--check collisions
	if not detect_hit(
	  ball.x,nexty,
	  ball.w,ball.h,
	  box1.x,box1.y,
	  box1.w,box1.h) then
	  ball.y=nexty
	end
	if not detect_hit(
	  nextx,ball.y,
	  ball.w,ball.h,
	  box1.x,box1.y,
	  box1.w,box1.h) then
	  ball.x=nextx
	end
end

function _draw()
	cls()
	spr(1,ball.x,ball.y)
	rectfill(box1.x,box1.y,
		box1.x+box1.w-1,box1.y+box1.h-1,
		8)
end
-->8
--variables
ball={
	x=10,
	y=10,
	w=8,
	h=8
}

box1={
	x=64,
	y=64,
	w=16,
	h=16
}

-->8
--functions

function detect_hit(
 x1,y1,
 w1,h1,
 x2,y2,
 w2,h2)

 hit=false
 local xd=abs((x1+(w1/2))-(x2+(w2/2)))
 local xs=w1*0.5+w2*0.5
 local yd=abs((y1+(h1/2))-(y2+(h2/2)))
 local ys=h1/2+h2/2
 if xd<xs and yd<ys then
  hit=true
 end
     
 return hit
end
__gfx__
00000000002222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000022222200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700222222220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000022222200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000002222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
